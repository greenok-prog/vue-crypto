(function(e){function t(t){for(var i,n,a=t[0],o=t[1],l=t[2],u=0,b=[];u<a.length;u++)n=a[u],Object.prototype.hasOwnProperty.call(c,n)&&c[n]&&b.push(c[n][0]),c[n]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);d&&d(t);while(b.length)b.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],i=!0,a=1;a<r.length;a++){var o=r[a];0!==c[o]&&(i=!1)}i&&(s.splice(t--,1),e=n(n.s=r[0]))}return e}var i={},c={app:0},s=[];function n(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/vue-crypto/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=o;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);var i=r("7a23");const c={class:"container mx-auto flex flex-col items-center bg-gray-100 p-4"},s={key:0,class:"fixed w-100 h-100 opacity-80 bg-purple-800 inset-0 z-50 flex items-center justify-center"},n=Object(i["e"])("svg",{class:"animate-spin -ml-1 mr-3 h-12 w-12 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[Object(i["e"])("circle",{class:"opacity-50",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),Object(i["e"])("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a=[n],o={class:"container"},l={class:"flex"},d={class:"max-w-xs"},u=Object(i["e"])("label",{for:"wallet",class:"block text-sm font-medium text-gray-700"},"Тикер",-1),b={class:"mt-1 relative rounded-md shadow-md"},p=["input"],h={class:"flex bg-white shadow-md p-1 rounded-md shadow-md flex-wrap"},f=["onClick"],g={key:0,class:"text-sm text-red-600"},m=Object(i["e"])("svg",{class:"-ml-0.5 mr-2 h-6 w-6",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"#ffffff"},[Object(i["e"])("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})],-1),O=Object(i["f"])(" Добавить "),j=[m,O],y=Object(i["e"])("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1),k=Object(i["e"])("label",{for:"",class:"block text-sm font-medium text-gray-700"},"Filter",-1),x={key:0,class:"w-full border-t border-gray-600 my-4"},w={class:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-3"},v=["onClick"],S={class:"px-4 py-5 sm:p-6 text-center"},C={class:"text-sm font-medium text-gray-500 truncate"},T={class:"mt-1 text-3xl font-semibold text-gray-900"},P=Object(i["e"])("div",{class:"w-full border-t border-gray-200"},null,-1),M=["onClick"],z=Object(i["e"])("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"#718096","aria-hidden":"true"},[Object(i["e"])("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),E=Object(i["f"])("Удалить "),I=[z,E],U={key:1,class:"w-full border-t border-gray-600 my-4"},L={key:2,class:"relative"},D={class:"text-lg leading-6 font-medium text-gray-900 my-8"},N={class:"flex items-end border-gray-600 border-b border-l h-64"},G={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs",version:"1.1",width:"30",height:"30",x:"0",y:"0",viewBox:"0 0 511.76 511.76",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},J=Object(i["e"])("g",null,[Object(i["e"])("path",{d:"M436.896,74.869c-99.84-99.819-262.208-99.819-362.048,0c-99.797,99.819-99.797,262.229,0,362.048    c49.92,49.899,115.477,74.837,181.035,74.837s131.093-24.939,181.013-74.837C536.715,337.099,536.715,174.688,436.896,74.869z     M361.461,331.317c8.341,8.341,8.341,21.824,0,30.165c-4.16,4.16-9.621,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    l-75.413-75.435l-75.392,75.413c-4.181,4.16-9.643,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    c-8.341-8.341-8.341-21.845,0-30.165l75.392-75.413l-75.413-75.413c-8.341-8.341-8.341-21.845,0-30.165    c8.32-8.341,21.824-8.341,30.165,0l75.413,75.413l75.413-75.413c8.341-8.341,21.824-8.341,30.165,0    c8.341,8.32,8.341,21.824,0,30.165l-75.413,75.413L361.461,331.317z",fill:"#718096","data-original":"#000000"})],-1),V=[J];function _(e,t,r,n,m,O){return Object(i["i"])(),Object(i["d"])("div",c,[m.load?(Object(i["i"])(),Object(i["d"])("div",s,a)):Object(i["c"])("",!0),Object(i["e"])("div",o,[Object(i["e"])("section",null,[Object(i["e"])("div",l,[Object(i["e"])("div",d,[u,Object(i["e"])("div",b,[Object(i["m"])(Object(i["e"])("input",{input:O.helper,"onUpdate:modelValue":t[0]||(t[0]=e=>m.ticker=e),onKeydown:t[1]||(t[1]=Object(i["n"])(e=>O.add(this.ticker),["enter"])),type:"text",name:"wallet",id:"wallet",class:"block w-full pr-10 border-gray-300 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 sm:text-sm rounded-md",placeholder:"Например DOGE"},null,40,p),[[i["l"],m.ticker]])]),Object(i["e"])("div",h,[(Object(i["i"])(!0),Object(i["d"])(i["a"],null,Object(i["j"])(O.helper(),e=>(Object(i["i"])(),Object(i["d"])("span",{onClick:t=>O.add(e),key:e,class:"inline-flex items-center px-2 m-1 rounded-md text-xs font-medium bg-gray-300 text-gray-800 cursor-pointer"},Object(i["k"])(e),9,f))),128))]),m.er?(Object(i["i"])(),Object(i["d"])("div",g," Такой тикер уже добавлен ")):Object(i["c"])("",!0)])]),Object(i["e"])("button",{onClick:t[2]||(t[2]=e=>O.add(this.ticker)),type:"button",class:"my-4 inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},j)]),y,Object(i["e"])("div",null,[k,Object(i["m"])(Object(i["e"])("input",{onClick:t[3]||(t[3]=e=>m.page=1),class:"block pr-10 border-gray-300 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 sm:text-sm rounded-md",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>m.filter=e)},null,512),[[i["l"],m.filter]]),m.page>1?(Object(i["i"])(),Object(i["d"])("button",{key:0,onClick:t[5]||(t[5]=e=>m.page=m.page-1),class:"mr-4 my-4 inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Назад ")):Object(i["c"])("",!0),O.hasNextPage?(Object(i["i"])(),Object(i["d"])("button",{key:1,onClick:t[6]||(t[6]=e=>m.page=m.page+1),class:"my-4 inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Вперед ")):Object(i["c"])("",!0)]),m.tickers.length>0?(Object(i["i"])(),Object(i["d"])("hr",x)):Object(i["c"])("",!0),Object(i["e"])("dl",w,[(Object(i["i"])(!0),Object(i["d"])(i["a"],null,Object(i["j"])(O.paginetedTickers,e=>(Object(i["i"])(),Object(i["d"])("div",{key:e.name,onClick:t=>O.select(e),class:Object(i["g"])([{"border-4":m.selectedTicker===e},"bg-white overflow-hidden shadow rounded-lg border-purple-800 border-solid cursor-pointer"])},[Object(i["e"])("div",S,[Object(i["e"])("dt",C,Object(i["k"])(e.name)+" - USD ",1),Object(i["e"])("dd",T,Object(i["k"])(O.formatPrice(e.price)),1)]),P,Object(i["e"])("button",{onClick:Object(i["o"])(t=>O.handlerDelete(e),["stop"]),class:"flex items-center justify-center font-medium w-full bg-gray-100 px-4 py-4 sm:px-6 text-md text-gray-500 hover:text-gray-600 hover:bg-gray-200 hover:opacity-20 transition-all focus:outline-none"},I,8,M)],10,v))),128))]),m.tickers.length>0?(Object(i["i"])(),Object(i["d"])("hr",U)):Object(i["c"])("",!0),m.selectedTicker?(Object(i["i"])(),Object(i["d"])("section",L,[Object(i["e"])("h3",D,Object(i["k"])(m.selectedTicker.name)+" - USD ",1),Object(i["e"])("div",N,[(Object(i["i"])(!0),Object(i["d"])(i["a"],null,Object(i["j"])(O.normalizedGraph,(e,t)=>(Object(i["i"])(),Object(i["d"])("div",{key:t,style:Object(i["h"])({height:e+"%"}),class:"bg-purple-800 border w-10"},null,4))),128))]),Object(i["e"])("button",{onClick:t[7]||(t[7]=t=>O.select(e.t)),type:"button",class:"absolute top-0 right-0"},[(Object(i["i"])(),Object(i["d"])("svg",G,V))])])):Object(i["c"])("",!0)])])}r("caad");const A="71920a645240de9c957b50120f5fda78cda7afb9e66bb6a0591485e553c2c9b8",B=new Map,$=new WebSocket("wss://streamer.cryptocompare.com/v2?api_key="+A),H="5";function R(e){const t=JSON.stringify(e);$.readyState!==WebSocket.OPEN?$.addEventListener("open",()=>{$.send(t)},{once:!0}):$.send(t)}function F(e){R({action:"SubAdd",subs:[`5~CCCAGG~${e}~USD`]})}function W(e){R({action:"SubRemove",subs:[`5~CCCAGG~${e}~USD`]})}$.addEventListener("message",e=>{const{TYPE:t,FROMSYMBOL:r,PRICE:i}=JSON.parse(e.data);if(t===H&&void 0!==i){var c;const e=null!==(c=B.get(r))&&void 0!==c?c:[];e.forEach(e=>e(i))}});const Y=(e,t)=>{const r=B.get(e)||[];B.set(e,[...r,t]),F(e)},K=e=>{B.delete(e),W(e)};var q={name:"App",data(){return{ticker:"",filter:"",tickers:[],selectedTicker:null,load:!0,graph:[],er:!1,coinList:[],page:1}},async created(){const e=await fetch("https://min-api.cryptocompare.com/data/all/coinlist?summary=true"),t=await e.json();this.coinList=t.Data;const r=["filter","page"],i=Object.fromEntries(new URL(window.location).searchParams.entries());i.filter&&(this.filter=i.filter),r.forEach(e=>{i[e]&&(this[e]=i[e])});const c=localStorage.getItem("cryptonomicon-list");c&&(this.tickers=JSON.parse(c),this.tickers.forEach(e=>{Y(e.name,t=>this.updateTicker(e.name,t))})),setInterval(this.updateTickers,5e3),this.load=!1},methods:{formatPrice(e){return"-"===e?e:e>1?e.toFixed(2):e.toPrecision(2)},updateTicker(e,t){this.tickers.filter(t=>t.name===e).forEach(e=>{e===this.selectedTicker&&this.graph.push(t),e.price=t})},add(e=this.ticker){const t={name:e.toUpperCase(),price:"-"};if(this.tickers.find(e=>e.name===t.name))return this.er=!0,void(this.ticker="");this.tickers=[...this.tickers,t],localStorage.setItem("cryptonomicon-list",JSON.stringify(this.tickers)),this.ticker="",this.filter="",Y(t.name,e=>this.updateTicker(t.name,e)),this.er=!1},handlerDelete(e){this.tickers=this.tickers.filter(t=>t!==e),this.selectedTicker==e&&(this.selectedTicker=null),K(e.name)},select(e){this.selectedTicker=e},helper(){const e=Object.keys(this.coinList).filter(e=>e.includes(this.ticker.toUpperCase())),t=e.slice(0,4);return t}},computed:{normalizedGraph(){const e=Math.max(...this.graph),t=Math.min(...this.graph);return e===t?this.graph.map(()=>50):this.graph.map(r=>5+95*(r-t)/(e-t))},startIndex(){return 6*(this.page-1)},endIndex(){return 6*this.page},filteredTickers(){return this.tickers&&this.tickers.filter(e=>e.name.includes(this.filter.toUpperCase()))},paginetedTickers(){return this.filteredTickers.slice(this.startIndex,this.endIndex)},hasNextPage(){return this.filteredTickers.length>this.endIndex},pageStateOptions(){return{filter:this.filter,page:this.page}}},watch:{tickers(){localStorage.setItem("cryptonomicon-list",JSON.stringify(this.tickers))},selectedTicker(){this.graph=[]},paginetedTickers(){0===this.paginetedTickers.length&this.page>1&&(this.page-=1)},filter(){this.page=1},pageStateOptions(e){history.pushState(null,document.title,`${window.location.pathname}?filter=${e.filter}&page=${e.page}`)}}},Q=r("6b0d"),X=r.n(Q);const Z=X()(q,[["render",_]]);var ee=Z;r("ba8c");Object(i["b"])(ee).mount("#app")},ba8c:function(e,t,r){}});
//# sourceMappingURL=app.19f70290.js.map